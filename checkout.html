<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checkout Merchandise</title>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: #fff8f0;
      padding: 30px;
    }
    .checkout-box {
      max-width: 480px;
      margin: auto;
      background: #fff;
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.15);
    }
    h2 {
      color: #ff6600;
      text-align: center;
      margin-bottom: 20px;
    }
    .produk-detail {
      background: #fff3e0;
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      text-align: center;
    }
    .produk-detail img {
      width: 180px;
      height: auto;
      border-radius: 10px;
      margin-bottom: 10px;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: 600;
    }
    input, select, textarea {
      width: 100%;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
      margin-top: 5px;
      box-sizing: border-box;
    }
    button {
      background: #ff6600;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 10px 20px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 20px;
      width: 100%;
    }
    button:hover {
      background: #e65100;
    }
    .hasil {
      margin-top: 20px;
      padding: 15px;
      background: #f1f8e9;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <div class="checkout-box">
    <h2>Checkout Merchandise</h2>

    <div class="produk-detail">
      <img id="produkGambar" src="" alt="Produk">
      <p id="produkNama"></p>
      <p id="produkHarga"></p>
    </div>

    <form id="formCheckout">
      <label>Nama Lengkap</label>
      <input type="text" id="nama" required>

      <label>Alamat Lengkap</label>
      <textarea id="alamat" rows="3" required></textarea>

      <label>Ongkir (Rp)</label>
      <select id="ongkir" required>
        <option value="">-- Pilih Ongkir --</option>
        <option value="10000">Jabodetabek - Rp 10.000</option>
        <option value="20000">Jawa Tengah / Timur - Rp 20.000</option>
        <option value="30000">Luar Jawa - Rp 30.000</option>
      </select>

      <label>Metode Pembayaran</label>
      <select id="pembayaran" required>
        <option value="">-- Pilih Pembayaran --</option>
        <option value="va">Virtual Account</option>
        <option value="qris">QRIS</option>
      </select>

      <button type="submit">Bayar Sekarang</button>
    </form>

    <div id="hasil" class="hasil" style="display:none;"></div>
  </div>

  <script>
    // Ambil data produk dari URL
    const params = new URLSearchParams(window.location.search);
    const namaProduk = params.get("nama");
    const hargaProduk = params.get("harga");
    const gambarProduk = params.get("gambar"); // ambil gambar juga

    // tampilkan data produk
    document.getElementById("produkNama").textContent = "Produk: " + (namaProduk || "-");
    document.getElementById("produkHarga").textContent = "Harga: " + (hargaProduk || "-");
    document.getElementById("produkGambar").src = gambarProduk || "Logo_Persija.png"; // fallback kalau gambar kosong

    const form = document.getElementById("formCheckout");
    const hasil = document.getElementById("hasil");

    form.addEventListener("submit", function(e) {
      e.preventDefault();

      const nama = document.getElementById("nama").value;
      const alamat = document.getElementById("alamat").value;
      const ongkir = parseInt(document.getElementById("ongkir").value);
      const metode = document.getElementById("pembayaran").value;
      const hargaInt = parseInt(hargaProduk.replace(/\D/g, "")) || 0;
      const total = hargaInt + ongkir;
      const resi = "JAK-" + Math.floor(100000 + Math.random() * 900000);

      let pembayaranHTML = "";
      if (metode === "va") {
        const va = "VA-" + Math.floor(100000000 + Math.random() * 900000000);
        pembayaranHTML = `<p><strong>Nomor Virtual Account:</strong><br>${va}</p>`;
      } else {
        pembayaranHTML = `
          <p><strong>Scan QR Code berikut untuk membayar:</strong></p>
          <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=Bayar%20${encodeURIComponent(namaProduk)}%20Rp${total}" alt="QRIS">
        `;
      }

      hasil.style.display = "block";
      hasil.innerHTML = `
        <h3>Pesanan Berhasil Dibuat!</h3>
        <p><strong>Nama:</strong> ${nama}</p>
        <p><strong>Alamat:</strong> ${alamat}</p>
        <p><strong>Produk:</strong> ${namaProduk}</p>
        <img src="${gambarProduk}" alt="Produk" style="width:120px;border-radius:8px;margin:10px 0;">
        <p><strong>Harga Produk:</strong> Rp${hargaInt.toLocaleString()}</p>
        <p><strong>Ongkir:</strong> Rp${ongkir.toLocaleString()}</p>
        <p><strong>Total Bayar:</strong> Rp${total.toLocaleString()}</p>
        ${pembayaranHTML}
        <hr>
        <p><strong>Nomor Resi:</strong> ${resi}</p>
        <p>Pesanan akan diproses setelah pembayaran diterima.</p>
      `;

      form.reset();
    });
  </script>
</body>
</html>
